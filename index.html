<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<title>AI ç©¿æ­å»ºè­°å°å¹«æ‰‹</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
*{box-sizing:border-box;}
body{margin:0;font-family:system-ui;background:#f5f5f7;color:#222;}
header{background:linear-gradient(120deg,#fbc2eb,#a6c1ee);padding:20px;}
main{display:flex;flex-wrap:wrap;gap:16px;padding:16px;}
.panel{background:white;padding:16px;border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,0.08);}
.left{flex:3 1 600px;}
.right{flex:1 1 280px;}

.upload-section{border:2px dashed #ccc;padding:12px;border-radius:12px;margin-bottom:16px;}
.upload-title{font-weight:700;margin-bottom:6px;}

.image-grid{display:grid;grid-template-columns:repeat(auto-fill,100px);gap:10px;}
.thumb-box{width:100px;height:100px;position:relative;}
.thumb{width:100%;height:100%;object-fit:cover;border-radius:10px;border:1px solid #ddd;}
.delete-btn{
  position:absolute;top:-6px;right:-6px;
  background:#ff4d4d;width:22px;height:22px;
  border-radius:50%;border:none;color:white;font-weight:bold;cursor:pointer;
}

button{padding:8px 12px;border-radius:8px;border:none;cursor:pointer;}
.primary{background:#ff7eb3;color:white;}
.history-btn{width:100%;background:#4a90e2;color:white;margin-top:10px;}
</style>
</head>

<body>

<header>
  <h1>ä½ çš„è¡£æ«¥</h1>
  <p>ä¸Šå‚³æ™‚ç›´æ¥æŒ‡å®šé•·çŸ­è¢– / é•·çŸ­è¤²ï¼Œç³»çµ±ä¸å†çŒœ</p>
</header>

<main>
<section class="panel left">
  <h2>ä¸Šè¡£</h2>

  <div class="upload-section">
    <div class="upload-title">ğŸ‘• çŸ­è¢–ä¸Šè¡£</div>
    <input type="file" id="uploadTopShort" multiple>
    <div id="topShortGrid" class="image-grid"></div>
  </div>

  <div class="upload-section">
    <div class="upload-title">ğŸ‘• é•·è¢–ä¸Šè¡£</div>
    <input type="file" id="uploadTopLong" multiple>
    <div id="topLongGrid" class="image-grid"></div>
  </div>

  <h2>ä¸‹è‘—</h2>

  <div class="upload-section">
    <div class="upload-title">ğŸ‘– çŸ­è¤² / è£™</div>
    <input type="file" id="uploadBottomShort" multiple>
    <div id="bottomShortGrid" class="image-grid"></div>
  </div>

  <div class="upload-section">
    <div class="upload-title">ğŸ‘– é•·è¤² / é•·è£™</div>
    <input type="file" id="uploadBottomLong" multiple>
    <div id="bottomLongGrid" class="image-grid"></div>
  </div>

  <h2>å…¶ä»–</h2>

  <div class="upload-section">
    <div class="upload-title">ğŸ§¥ å¤–å¥—</div>
    <input type="file" id="uploadOuter" multiple>
    <div id="outerGrid" class="image-grid"></div>
  </div>

  <div class="upload-section">
    <div class="upload-title">ğŸ‘Ÿ é‹å­</div>
    <input type="file" id="uploadShoes" multiple>
    <div id="shoesGrid" class="image-grid"></div>
  </div>

  <div class="upload-section">
    <div class="upload-title">ğŸ’ é…ä»¶</div>
    <input type="file" id="uploadAcc" multiple>
    <div id="accGrid" class="image-grid"></div>
  </div>

  <button class="history-btn" onclick="location.href='history.html'">ğŸ“œ æŸ¥çœ‹ç©¿æ­æ­·å²</button>
</section>

<aside class="panel right">
  <h2>ç”Ÿæˆç©¿æ­</h2>
  <button class="primary" id="genBtn">ç”Ÿæˆ</button>
  <div id="outfit"></div>
</aside>
</main>

<script>
// ================= è³‡æ–™çµæ§‹ =================
let tops=[], bottoms=[], outers=[], shoes=[], accs=[];

// â˜… ä¸Šå‚³å·¥å…·ï¼ˆä¸å†åˆ¤æ–·ï¼Œåªå¯«æ­» typeï¼‰
function addImages(input, category, type, gridId){
  [...input.files].forEach(file=>{
    const reader=new FileReader();
    reader.onload=()=>{
      const item={
        id:"id_"+Date.now()+Math.random(),
        category,
        clothingType:type,
        url:reader.result
      };
      if(category==="top") tops.push(item);
      if(category==="bottom") bottoms.push(item);
      if(category==="outer") outers.push(item);
      if(category==="shoes") shoes.push(item);
      if(category==="acc") accs.push(item);
      renderGrid(category, gridId);
    };
    reader.readAsDataURL(file);
  });
}

// â˜… ç¶å®šä¸Šå‚³ï¼ˆé€™è£¡æ˜¯é—œéµï¼‰
uploadTopShort.onchange=e=>addImages(e.target,"top","short-sleeve","topShortGrid");
uploadTopLong.onchange =e=>addImages(e.target,"top","long-sleeve","topLongGrid");

uploadBottomShort.onchange=e=>addImages(e.target,"bottom","short","bottomShortGrid");
uploadBottomLong.onchange =e=>addImages(e.target,"bottom","long","bottomLongGrid");

uploadOuter.onchange =e=>addImages(e.target,"outer","outer","outerGrid");
uploadShoes.onchange=e=>addImages(e.target,"shoes","shoes","shoesGrid");
uploadAcc.onchange   =e=>addImages(e.target,"acc","acc","accGrid");

function renderGrid(category, gridId){
  const grid=document.getElementById(gridId);
  grid.innerHTML="";
  const list = category==="top"?tops:
               category==="bottom"?bottoms:
               category==="outer"?outers:
               category==="shoes"?shoes:accs;

  list.forEach((i,idx)=>{
    const d=document.createElement("div");
    d.className="thumb-box";
    d.innerHTML=`<img src="${i.url}" class="thumb">
                 <button class="delete-btn">Ã—</button>`;
    d.querySelector("button").onclick=()=>{
      list.splice(idx,1);
      renderGrid(category, gridId);
    };
    grid.appendChild(d);
  });
}

// ================= ç”Ÿæˆï¼ˆç¤ºæ„ï¼‰ =================
genBtn.onclick=()=>{
  outfit.innerHTML="";
  const top=tops[Math.floor(Math.random()*tops.length)];
  const bottom=bottoms[Math.floor(Math.random()*bottoms.length)];
  if(top) outfit.innerHTML+=`<img src="${top.url}" width="120">`;
  if(bottom) outfit.innerHTML+=`<img src="${bottom.url}" width="120">`;
};
</script>

</body>
</html>
